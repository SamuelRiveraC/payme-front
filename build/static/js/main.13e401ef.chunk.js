(this["webpackJsonppayme-front"]=this["webpackJsonppayme-front"]||[]).push([[0],{160:function(e,t,c){},296:function(e,t,c){},298:function(e,t,c){},299:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(18),i=c.n(s),r=c(2),o=c(4),l=c(9),j=(c(77),c(3)),b=c.n(j),d=c(33),u=c(119),h=c.n(u),m=(c(160),c.p+"static/media/payme-light.903d66b1.png"),O=c.p+"static/media/Money_transfer_1.e9c63204.png",x=c.p+"static/media/Money_transfer_2.bdd99fea.png",f=c(0);var p=function(){return Object(f.jsx)("div",{className:"container container-transparent",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col onboarding",children:Object(f.jsxs)(h.a,Object(d.a)(Object(d.a)({},{dots:!0,arrows:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:m,alt:"Logo",height:"64",className:"mb-0"}),Object(f.jsx)("img",{src:"data:image/png;base64,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",alt:"Logo"}),Object(f.jsx)("br",{}),Object(f.jsx)("h3",{children:"Easy payments for individuals and business"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Send money to family and friends"}),Object(f.jsx)("br",{}),Object(f.jsx)("img",{src:O,alt:"Logo"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Pay products and service"}),Object(f.jsx)("br",{}),Object(f.jsx)("img",{src:x,alt:"Logo"})]})]}))}),Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(f.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/register",children:"Register"}),Object(f.jsx)("br",{}),Object(f.jsx)(o.b,{className:"btn btn-link-dark w-100",to:"/login",children:"Log In"})]})]})})},v=c(19),N=c.n(v),A=c(28),g=c(6),w=c(7);function y(){var e=Object(l.f)();return Object(f.jsx)("button",{className:"link",onClick:function(){e.goBack()},children:Object(f.jsx)(g.a,{size:"lg",icon:w.d})})}function k(){return Object(f.jsx)(o.b,{to:"/settings",children:Object(f.jsx)(g.a,{size:"lg",icon:w.b})})}function _(e){var t=e.notificationNumber;return Object(f.jsxs)(o.b,{to:"/notifications",style:{position:"relative"},children:[Object(f.jsx)(g.a,{size:"lg",icon:w.c,style:{height:60}}),t>0&&Object(f.jsxs)("div",{className:"notification__number",children:[" ",t," "]})]})}function S(e){var t=e.children,c=e.back,a=e.menu,n=e.notification,s=e.notificationNumber;return Object(f.jsx)("div",{className:"col-12 mobile_col header",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"col-6",children:[c&&Object(f.jsx)(y,{}),n&&Object(f.jsx)(_,{notificationNumber:s})]}),Object(f.jsx)("div",{className:"col-6 text-right",children:a&&Object(f.jsx)(k,{})}),t&&Object(f.jsxs)("div",{className:"col-12 mt-5 title",children:[" ",t," "]})]})})}var C=c(45),T=c(46),I=c(49),B=c(48),z=c(10),D=function(e){Object(I.a)(c,e);var t=Object(B.a)(c);function c(){return Object(C.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){return Object(f.jsx)(z.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:250,delay:250},leave:{animation:"fadeOut",duration:250},children:Object(f.jsx)("div",{className:"validation__error",children:this.props.active&&Object(f.jsxs)("div",{children:[" ",Object(f.jsx)(g.a,{size:"lg",icon:w.f})," ",this.props.children," "]})})})}}]),c}(n.a.Component);function E(e){var t=e.setToken,c=Object(a.useState)(),n=Object(r.a)(c,2),s=n[0],i=n[1],o=Object(a.useState)(),l=Object(r.a)(o,2),j=l[0],d=l[1],u=Object(a.useState)({wrong:!1,emailOrPhone:!1,password:!1}),h=Object(r.a)(u,2),m=h[0],O=h[1],x=function(){setTimeout((function(){O({wrong:!1,emailOrPhone:!1,password:!1})}),6250)},p=function(){var e=Object(A.a)(N.a.mark((function e(c){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s&&j){e.next=5;break}return O({wrong:!1,emailOrPhone:!s,password:!j}),x(),e.abrupt("return",!1);case 5:b.a.post("https://localhost:3333/login",{emailOrPhone:s,password:j}).then((function(e){t(e.data)})).catch((function(e){O({wrong:!0,emailOrPhone:!1,password:!1}),x()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("form",{className:"row mobile_row",onSubmit:p,children:[Object(f.jsx)(S,{back:!0,children:" Log in PayMe "}),Object(f.jsxs)("div",{className:"col-12 mobile_col",children:[Object(f.jsx)(D,{active:m.wrong,children:" The Email, phone or password are incorrect  "})," ",Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-outline",children:[Object(f.jsx)("label",{className:"form-label",children:"Email or Phone"}),Object(f.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return i(e.target.value)}}),Object(f.jsx)(D,{active:m.emailOrPhone,children:" A phone number or email is required "})]}),Object(f.jsxs)("div",{className:"form-outline",children:[Object(f.jsx)("label",{className:"form-label",children:"Password"}),Object(f.jsx)("input",{type:"password",className:"form-control",onChange:function(e){return d(e.target.value)}}),Object(f.jsx)(D,{active:m.password,children:" The password is required "})]}),Object(f.jsx)("div",{className:"form-outline",children:Object(f.jsx)("a",{className:"w-100 py-3",href:"#",children:"I Forgot my Password"})})]}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",type:"submit",children:"Log In"})})]})})}function P(e){var t=e.setToken,c=Object(a.useState)(),n=Object(r.a)(c,2),s=n[0],i=n[1],o=Object(a.useState)(),l=Object(r.a)(o,2),j=l[0],d=l[1],u=Object(a.useState)(),h=Object(r.a)(u,2),m=h[0],O=h[1],x=Object(a.useState)(),p=Object(r.a)(x,2),v=p[0],g=p[1],w=Object(a.useState)(),y=Object(r.a)(w,2),k=y[0],_=y[1],C=Object(a.useState)(),T=Object(r.a)(C,2),I=T[0],B=T[1],z=Object(a.useState)({}),E=Object(r.a)(z,2),P=E[0],U=E[1],q=function(){setTimeout((function(){U({duplicated:!1,password:!1,email:!1,phone:!1,first_name:!1,last_name:!1,tos:!1})}),6250)},V=function(){var e=Object(A.a)(N.a.mark((function e(c){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s&&j&&m&&v&&k&&I){e.next=5;break}return U({password:!s,email:!j,phone:!m,first_name:!v,last_name:!k,tos:!I}),q(),e.abrupt("return",!1);case 5:b.a.post("https://localhost:3333/users",{password:s,email:j,phone:m,first_name:v,last_name:k}).then((function(e){t(e.data)})).catch((function(e){U({duplicated:!0}),q()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("form",{className:"row mobile_row",onSubmit:V,children:[Object(f.jsx)(S,{back:!0,children:" Register in PayMe "}),Object(f.jsxs)("div",{className:"col-12 mobile_col",children:[Object(f.jsx)(D,{active:P.duplicated,children:" The Account already exists  "})," ",Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"form-outline ",children:[Object(f.jsx)("label",{className:"form-label",children:"First name"}),Object(f.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return g(e.target.value)}}),Object(f.jsx)(D,{active:P.first_name,children:" The first name is required  "})]}),Object(f.jsxs)("div",{className:"form-outline ",children:[Object(f.jsx)("label",{className:"form-label",children:"Last name"}),Object(f.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return _(e.target.value)}}),Object(f.jsx)(D,{active:P.last_name,children:" The last name is required  "})]}),Object(f.jsxs)("div",{className:"form-outline ",children:[Object(f.jsx)("label",{className:"form-label",children:"Email"}),Object(f.jsx)("input",{type:"email",className:"form-control",onChange:function(e){return d(e.target.value)}}),Object(f.jsx)(D,{active:P.email,children:" The email is required  "})]}),Object(f.jsxs)("div",{className:"form-outline ",children:[Object(f.jsx)("label",{className:"form-label",children:"Phone"}),Object(f.jsx)("input",{type:"phone",className:"form-control",onChange:function(e){return O(e.target.value)}}),Object(f.jsx)(D,{active:P.phone,children:" The phone number is required  "})]}),Object(f.jsxs)("div",{className:"form-outline ",children:[Object(f.jsx)("label",{className:"form-label",children:"Password"}),Object(f.jsx)("input",{type:"password",className:"form-control",onChange:function(e){return i(e.target.value)}}),Object(f.jsx)(D,{active:P.password,children:" The password is required  "})]}),Object(f.jsxs)("div",{className:"form-check ",children:[Object(f.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(e){return B(e.target.checked)}}),Object(f.jsx)("label",{className:"form-check-label",children:"I Accept the Privacy policy and the Terms of Use"}),Object(f.jsx)("br",{}),Object(f.jsx)(D,{active:P.tos,children:" You are required to accept our ToS  "})]})]}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 ",type:"submit",children:"Register"})})]})})}function U(e){var t,c=e.transaction,a=new Date(c.updated_at),n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(a),s=new Intl.DateTimeFormat("en",{month:"short"}).format(a),i=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(a),r="".concat(i,"-").concat(s,"-").concat(n),o=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.user;return"debit"===c.fetch_type||"credit"===c.fetch_type?Object(f.jsxs)("li",{className:"row",children:[Object(f.jsx)("div",{className:"col-2 text-left image",children:Object(f.jsx)("img",{src:"https://via.placeholder.com/160/"+c.color+"/EDF4FC?text="+c.party.slice(0,2),height:60,alt:"transaction"})}),Object(f.jsxs)("div",{className:"col-5 text-left information",children:[Object(f.jsxs)("b",{children:[" ",c.party," "]}),Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",r]})]}),Object(f.jsxs)("div",{className:"col-5 text-right amount",style:"debit"===c.fetch_type?{color:"#932727"}:{},children:["debit"===c.fetch_type&&"-"," ",parseFloat(c.amount).toFixed(2),"\u20ac"]})]}):Object(f.jsxs)("li",{className:"row",children:[Object(f.jsxs)("div",{className:"col-2 text-left image",children:[o.id===c.sender.id&&Object(f.jsx)("img",{src:c.sender.profile_picture,height:60,alt:"transaction"}),o.id===c.receiver.id&&Object(f.jsx)("img",{src:c.receiver.profile_picture,height:60,alt:"transaction"})]}),Object(f.jsxs)("div",{className:"col-5 text-left information",children:[o.id===c.sender.id&&Object(f.jsxs)("b",{children:[" ",c.receiver.first_name," ",c.receiver.last_name," "]}),o.id===c.receiver.id&&Object(f.jsxs)("b",{children:[" ",c.sender.first_name," ",c.sender.last_name," "]}),Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",r]})]}),Object(f.jsxs)("div",{className:"col-5 text-right amount",style:o.id===c.user_sender_id?{color:"#932727"}:{},children:[o.id===c.user_sender_id&&"-"," ",c.amount.toFixed(2),"\u20ac"]})]})}function q(e){e.user;var t,c=e.BankAccounts,a=e.Transactions,n=e.Notifications,s=0;c&&Array.isArray(c)&&(s=null===(t=c.find((function(e){return"true"===e.primary})))||void 0===t?void 0:t.balance);return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsxs)("div",{className:"row dashboard",children:[Object(f.jsx)(S,{notification:!0,notificationNumber:n.length,menu:!0}),Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",children:[(s||0==s)&&Object(f.jsxs)("h1",{children:[" ",Object(f.jsx)("small",{children:"Available Balance"})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("b",{children:[s,"\u20ac"]})," ",Object(f.jsx)("br",{})," ",Object(f.jsx)("br",{})," "]}),!s&&0!=s&&0==c.length&&Object(f.jsx)("h1",{children:Object(f.jsx)(o.b,{to:"/add-account",children:"Upload a bank account to start"})}),!s&&0!=s&&c.length>0&&Object(f.jsx)("h3",{children:Object(f.jsx)(o.b,{to:"/add-account",children:"Change one account to primary, so it can be used for payments and requests"})})]})]}),Object(f.jsxs)("div",{className:"col-12 mobile_col text-center transactions",children:[Object(f.jsx)("p",{children:"Recent Activity"}),Object(f.jsx)("ul",{children:a.map((function(e,t){return Object(f.jsx)(U,{transaction:e},t)}))})]}),Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(f.jsx)(o.b,{className:"btn btn-primary w-100 mb-3",to:"/send-payment",children:"Send payment"}),Object(f.jsx)("br",{}),Object(f.jsx)(o.b,{className:"btn btn-outline-primary w-100 mb-3",to:"/request-payment",children:"Request payment"})]})]})})}var V=c(47),L=c.n(V);var F=function(e){var t=e.logout,c=e.user;return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)("img",{src:c.profile_picture,alt:"profile"})," ","".concat(c.first_name," ").concat(c.last_name)]})}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("ul",{className:"settings",children:[Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/accounts",children:["My accounts ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/add-account",children:["Add account ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/settings",children:["Support ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/settings",children:["Legal ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(o.b,{to:"/settings",children:["Invite Friends ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("button",{className:"link",onClick:t,style:{display:"flex",justifyContent:"space-between",width:"100%",height:"60px",margin:0,padding:0,lineHeight:"60px",color:"#29363D"},children:["Logout ",Object(f.jsx)(g.a,{size:"lg",icon:w.e})]})})]})}),Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",onClick:function(){navigator.clipboard.writeText("".concat("http://localhost:3000/","user/").concat(c.slug))},children:[Object(f.jsx)("a",{href:"".concat("http://localhost:3000/","user/").concat(c.slug),children:"".concat("http://localhost:3000/","user/").concat(c.slug)}),Object(f.jsx)("br",{})," ",Object(f.jsx)("br",{}),Object(f.jsx)(L.a,{value:"".concat("http://localhost:3000/","user/").concat(c.slug)})]})]})})};function M(e){var t=e.notificationProp,c=Object(a.useState)(t),n=Object(r.a)(c,2),s=n[0],i=n[1],o=new Date(s.updated_at),j=new Intl.DateTimeFormat("en",{year:"numeric"}).format(o),u=new Intl.DateTimeFormat("en",{month:"short"}).format(o),h=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(o),m="".concat(h,"-").concat(u,"-").concat(j),O=Object(l.f)();return Object(f.jsxs)("button",{onClick:function(){if(0===s.type&&0===s.status)return O.push("/request/"+s.transaction_id),!0;if(0===s.status){var e,t=Object(d.a)({},s);t.status=0===t.status?1:0,b.a.put("https://localhost:3333/notifications/"+s.id,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}},{status:s.status}).then((function(e){e.data;i(t)})).catch((function(e){alert(e.response.data.code)}))}},className:0===s.status?"link row notification unread":"link row notification",children:[Object(f.jsxs)("div",{className:"col-10 text-left",children:[0===s.type&&Object(f.jsxs)("b",{children:[" ",s.transaction.receiver.first_name," ",s.transaction.receiver.last_name," has requested a payment for ",s.transaction.amount,"\u20ac "]}),1===s.type&&Object(f.jsxs)("b",{children:[" You have received ",s.transaction.amount,"\u20ac from ",s.transaction.sender.first_name," ",s.transaction.sender.last_name," "]}),Object(f.jsx)("br",{}),Object(f.jsxs)("small",{children:[" ",m," "]})]}),Object(f.jsx)("div",{className:"col-2 text-right",children:Object(f.jsx)(g.a,{size:"lg",icon:w.e})})]})}function R(e){var t=e.Notifications;return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:"Notifications"}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsx)("ul",{className:"notification",children:t.map((function(e,t){return Object(f.jsx)(M,{notificationProp:e},t)}))})}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsx)("br",{})})]})})}c(296);function J(){return Object(f.jsx)("div",{className:"container container-transparent",children:Object(f.jsx)("div",{className:"row mobile_row",children:Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("div",{className:"ct-loader style1",children:Object(f.jsxs)("div",{className:"loading-spin",children:[Object(f.jsxs)("div",{className:"spinner",children:[Object(f.jsx)("div",{className:"right-side",children:Object(f.jsx)("div",{className:"bar"})}),Object(f.jsx)("div",{className:"left-side",children:Object(f.jsx)("div",{className:"bar"})})]}),Object(f.jsxs)("div",{className:"spinner color-2",children:[Object(f.jsx)("div",{className:"right-side",children:Object(f.jsx)("div",{className:"bar"})}),Object(f.jsx)("div",{className:"left-side",children:Object(f.jsx)("div",{className:"bar"})})]})]})})})})})}var G=function(e){Object(I.a)(c,e);var t=Object(B.a)(c);function c(e){var a;return Object(C.a)(this,c),(a=t.call(this,e)).getInfo=function(){var e=Object(A.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.get("https://localhost:3333/users/search/"+a.state.query,{headers:{Authorization:"Bearer ".concat(null===(c=JSON.parse(localStorage.getItem("user")))||void 0===c?void 0:c.token)}}).then((function(e){var t=e.data;a.setState({results:t})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.selectUser=function(e){a.setState({results:[]}),a.props.setUser(e)},a.handleInputChange=function(){a.setState({query:a.search.value},(function(){a.state.query&&a.state.query.length>3?a.state.query.length%2===0&&a.getInfo():a.state.query}))},a.state={query:a.props.value,results:[]},a}return Object(T.a)(c,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"AutosuggestInput__container",children:[Object(f.jsx)("input",{className:"form-control",placeholder:"Email or Phone number",ref:function(t){return e.search=t},onChange:function(){return e.handleInputChange()}}),Object(f.jsx)("ul",{className:"AutosuggestInput",children:Object(f.jsx)(z.VelocityTransitionGroup,{enter:{animation:"slideDown",duration:250,delay:300},leave:{animation:"slideUp",duration:250},children:this.state.results.map((function(t){return Object(f.jsxs)("li",{onClick:function(){return e.selectUser(t)},children:[Object(f.jsxs)("b",{children:[t.first_name," ",t.last_name]})," ",Object(f.jsx)("br",{})," ",t.email]},t.id)}))})})]})}}]),c}(n.a.Component);function X(e){var t=e.operation,c=e.setTransactionUser;return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-6",children:Object(f.jsx)(y,{})}),Object(f.jsxs)("div",{className:"col-12 mt-5 mobile_col title d-flex justify-content-between",children:[t," Payment"]})]})}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("div",{className:"form-outline mb-3",children:[Object(f.jsx)("label",{className:"form-label",children:" Search User by Email or Phone number "}),Object(f.jsx)(G,{setUser:c})]})}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsx)("br",{})})]})})}function K(e){var t=e.userName,c=e.backStep,n=e.operation,s=e.setTransactionAmount,i=Object(a.useState)(""),l=Object(r.a)(i,2),j=l[0],b=l[1],d=function(e){if("X"===e||"x"===e||""===e||"Backspace"===e)b(j.slice(0,-1));else if("."===e)j.includes(".")||b(j+".");else if(" "!==e&&!isNaN(e)){var t=j.split(".");1!==t.length?t[1].length<=1&&b(j+e):b(j+e)}};return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-6",children:c?Object(f.jsx)("button",{className:"link",onClick:c,children:Object(f.jsx)(g.a,{size:"lg",icon:w.d})}):Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)(g.a,{size:"lg",icon:w.d})})}),Object(f.jsxs)("div",{className:"col-6 mt-5 mobile_col title d-flex justify-content-between",children:[Object(f.jsx)("span",{children:" Select Amount "}),Object(f.jsxs)("small",{children:[" ",t," "]})]})]})}),Object(f.jsx)("div",{className:"col-12 mobile_col calculator",children:Object(f.jsx)("div",{className:"form-outline mb-3",children:Object(f.jsx)("input",{type:"text",className:"form-control",value:j,onKeyUp:function(e){return d(e.key)}})})}),Object(f.jsxs)("div",{className:"col-12 mobile_col calculator",children:[Object(f.jsx)("div",{className:"button",onClick:function(){return d("1")},children:"1"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("2")},children:"2"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("3")},children:"3"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("4")},children:"4"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("5")},children:"5"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("6")},children:"6"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("7")},children:"7"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("8")},children:"8"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("9")},children:"9"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d(".")},children:"."}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("0")},children:"0"}),Object(f.jsx)("div",{className:"button",onClick:function(){return d("X")},children:Object(f.jsx)(g.a,{size:"lg",icon:w.a})})]}),Object(f.jsx)("div",{className:"col-12 mobile_col ",children:Object(f.jsxs)("button",{className:"btn btn-primary w-100 mb-3",onClick:function(){s(j)},children:[n," payment"]})})]})})}function W(e){var t=e.handleAuthorization,c=e.backStep,n=Object(a.useState)(),s=Object(r.a)(n,2),i=s[0],l=s[1];return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-6",children:c?Object(f.jsx)("button",{className:"link",onClick:c,children:Object(f.jsx)(g.a,{size:"lg",icon:w.d})}):Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)(g.a,{size:"lg",icon:w.d})})}),Object(f.jsx)("div",{className:"col-6 mt-5 mobile_col title d-flex justify-content-between",children:Object(f.jsx)("span",{children:" Authorize the transaction"})})]})}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsxs)("div",{className:"form-outline mb-3",children:[Object(f.jsx)("label",{children:" Insert the authorization code"}),Object(f.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return l(e.target.value)}})]})}),Object(f.jsx)("div",{className:"col-12 mobile_col ",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:function(){t("deutschebank",i)},backStep:!0,children:"Authorize transaction"})})]})})}function H(e){var t=e.error,c=e.tryAgain;return Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row mobile_row",children:Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(f.jsx)("h1",{className:"validation__error mb-5",children:"E_ROW_NOT_FOUND"===t?"This item was not found":"E_ROW_SAME_USER"===t||"E_SAME_USER"===t?"You can't send a transaction or request to yourself":"E_TRANSACTION_PAID"===t?"This transaction has been already paid":"E_TRANSACTION_CANCELLED"===t?"This transaction was cancelled":"E_SENDER_NO_BANK_ACCOUNT"===t?"Sender has no a connected bank account":"E_RECEIVER_NO_BANK_ACCOUNT"===t?"Receiver has no a connected bank account":"E_INSUFFICIENT_FUNDS"===t?"Insufficient funds to make this transaction":"E_USER_WRONG_TRANSACTION_ID"===t?"You have no access to this transaction":t}),Object(f.jsx)(o.b,{className:"btn btn-outline-primary w-100 mt-5",to:"/",children:"Go to Main Menu"}),c&&Object(f.jsx)("button",{className:"btn btn-outline-primary w-100 mt-5",onClick:function(){return c()},children:"Try Again"})]})})})}function Q(e){var t=e.operation,c=e.data,a=e.account;return Object(f.jsxs)("div",{className:"container container-transparent",children:[!a&&Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsxs)("h1",{children:[" ",c.amount," ",t," to ",c.userName]})}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("img",{src:c.profile_picture,alt:"profile_picture",style:{height:160,borderRadius:"100%"}})}),c.id&&Object(f.jsxs)("div",{className:"col-12 mobile_col text-center",style:{cursor:"pointer"},onClick:function(){navigator.clipboard.writeText("".concat("http://localhost:3000/","request/").concat(c.id))},children:[Object(f.jsxs)("p",{children:[" Share with ",c.userName," the link or QR code "]}),Object(f.jsxs)("p",{children:[" ",Object(f.jsxs)("b",{children:[" ","".concat("http://localhost:3000/","request/").concat(c.id)," "]})," "]}),Object(f.jsx)(L.a,{value:"".concat("http://localhost:3000/","request/").concat(c.id)})]}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/",children:"Main Menu"})})]}),a&&Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsxs)("h1",{children:[" ",a]})}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/",children:"Main Menu"})})]})]})}function Z(e){var t,c=e.transactionType,n=Object(l.h)(),s=n.transactionID,i=n.userSlug,o=Object(a.useState)(null),j=Object(r.a)(o,2),d=j[0],u=j[1],h=Object(a.useState)(0),m=Object(r.a)(h,2),O=m[0],x=m[1],p=Object(a.useState)(),v=Object(r.a)(p,2),N=v[0],A=v[1],g=Object(a.useState)(),w=Object(r.a)(g,2),y=w[0],k=w[1],_=Object(a.useState)(""),S=Object(r.a)(_,2),C=S[0],T=S[1],I=Object(a.useState)({userName:"",amount:"",profile_picture:""}),B=Object(r.a)(I,2),D=B[0],E=B[1],P=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token,U=function(){d>1&&u(d-1)},q=function(e){E({userName:"".concat(e.first_name," ").concat(e.last_name),profile_picture:e.profile_picture,amount:"".concat(e.amount,"\u20ac")})},V=function(e){u(null),b.a.post("https://localhost:3333/oauth-transactions/",{type:c,transaction:s&&s,counterParty:i||O.id,amount:e},{headers:{Authorization:"Bearer ".concat(P)}}).then((function(e){"payme"===e.data.bank?(q(e.data),u(!0)):"deutschebank"===e.data.bank?(k(e.data.id),u(3)):"rabobank"===e.data.bank?(window.open(e.data.url,"_blank"),q(e.data),u(!0)):"neonomics"===e.data.bank?window.location.href=e.data.url:(q(e.data),u(!0))})).catch((function(e){var t;k(void 0),T(null!==(t=e.response.data.code)&&void 0!==t?t:e.response.data.message),u(!1)}))};return Object(a.useEffect)((function(){return function(){switch(c){case"Send":case"Request":u(1);break;case"User":b.a.get("https://localhost:3333/users/"+i,{headers:{Authorization:"Bearer ".concat(P)}}).then((function(e){var t=e.data;x(t),u(2)})).catch((function(e){T(e.response.data.code),u(!1)}));break;case"Payment":V();break;default:u(1)}}()}),[]),Object(f.jsx)("div",{children:Object(f.jsxs)(z.VelocityTransitionGroup,{enter:{animation:!1===d||null===d||!0===d?"fadeIn":"slideDown",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[!1===d&&Object(f.jsx)(H,{error:C,tryAgain:function(){u(null),V(N)}}),null===d&&Object(f.jsx)(J,{}),!0===d&&Object(f.jsx)(Q,{operation:"Request"===c?"requested":"sent",data:D}),1===d&&Object(f.jsx)(X,{operation:"Request"===c?"Request":"Send",setTransactionUser:function(e){x(e),u(2)}}),2===d&&Object(f.jsx)(K,{operation:"Request"===c?"Request":"Send",setTransactionAmount:function(e){A(parseFloat(e)),V(parseFloat(e))},userName:"".concat(O.first_name," ").concat(O.last_name),backStep:U}),3===d&&Object(f.jsx)(W,{handleAuthorization:function(e,t){u(null),"deutschebank"===e&&b.a.post("https://localhost:3333/oauth-transactions/",{type:c,transaction:s&&s,counterParty:i||O.id,amount:N,otp_auth_id:y,otp_auth_key:t},{headers:{Authorization:"Bearer ".concat(P)}}).then((function(e){"deutschebank"===e.data.bank?(k(void 0),q(e.data)):"rabobank"===e.data.bank||e.data.bank,u(!0)})).catch((function(e){var t;k(void 0),T(null!==(t=e.response.data.code)&&void 0!==t?t:e.response.data.message),u(!1)}))},backStep:U})]})})}function Y(e){var t=e.account;return Object(f.jsxs)(o.b,{className:"row",to:"/account/"+t.id,children:[Object(f.jsxs)("div",{className:"col-10 text-left information",children:[Object(f.jsxs)("b",{children:[" ",t.alias," "]})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("span",{children:[" ",t.iban,"  "]})]}),Object(f.jsx)("div",{className:"col-2 text-right amount",children:Object(f.jsx)(g.a,{size:"lg",icon:w.e})})]})}function $(e){var t=e.BankAccounts;return Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" My Accounts "}),Object(f.jsx)("div",{className:"col-12 mobile_col",children:Object(f.jsx)("ul",{className:"account",children:t.map((function(e,t){return Object(f.jsx)(Y,{account:e},t)}))})}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)(o.b,{className:"btn btn-primary w-100 mb-3",to:"/add-account",children:"Add account"})})]})})}function ee(){var e,t,c,n,s,i,o=Object(l.h)().id,j=(Object(l.f)(),Object(a.useState)(1)),d=Object(r.a)(j,2),u=d[0],h=d[1],m=Object(a.useState)(""),O=Object(r.a)(m,2),x=O[0],p=O[1],v=Object(a.useState)(""),N=Object(r.a)(v,2),A=N[0],g=N[1],w=Object(a.useState)({}),y=Object(r.a)(w,2),k=y[0],_=y[1],C=Object(a.useState)(!1),T=Object(r.a)(C,2),I=T[0],B=T[1],D=function(e){var t;b.a.put("https://localhost:3333/bank_accounts/"+o,e,{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(t){e.primary?g("Account updated successfully"):g("Account consent renewed for the next 3 months successfully"),_(t.data),B("true"===t.data.primary),h(2)})).catch((function(e){p(e.response.data.code),h(-1)}))};return Object(a.useEffect)((function(){return function(){var e;b.a.get("https://localhost:3333/bank_accounts/"+o,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){h(0),_(e.data),B("true"===e.data.primary)})).catch((function(e){p(e.response.data.code),h(-1)}))}()}),[]),k.updated_at&&(e=new Date(k.updated_at),t=Intl.DateTimeFormat("en",{year:"numeric"}).format(e),c=Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e),s="".concat(n,"-").concat(c,"-").concat(t)),k.expires_at&&(e=new Date(k.expires_at),t=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),c=new Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e),i="".concat(n,"-").concat(c,"-").concat(t)),Object(f.jsxs)(z.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===u&&Object(f.jsx)(H,{error:x}),0===u&&Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" Account Name "}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" Alias "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k.alias," "]})]})}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" IBAN "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k.iban,"  "]})]})}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" Current balance "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k.balance,"\u20ac  "]})]})}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" BIC / Swift "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k.bic," "]})]})}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" Last time renewed "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k&&s," "]})]})}),Object(f.jsx)("div",{className:"col-12 row mobile_col account",children:Object(f.jsxs)("div",{className:"col-12 text-left information",children:[Object(f.jsx)("b",{children:" Consent expires by "})," ",Object(f.jsx)("br",{})," ",Object(f.jsxs)("small",{children:[" ",k&&i," "]})]})}),Object(f.jsxs)("div",{className:"col-12 row mobile_col account",children:[Object(f.jsxs)("div",{className:"col-8 text-left information",children:[Object(f.jsx)("b",{children:" Set as primary Account "}),Object(f.jsx)("br",{})]}),Object(f.jsx)("div",{className:"col-4 text-left information",children:Object(f.jsxs)("label",{className:"switch",children:[Object(f.jsx)("input",{type:"checkbox",checked:I,onClick:function(){return B(!I),void D({primary:I?"false":"true"})}}),Object(f.jsx)("div",{className:"slide"})]})})]}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-outline-primary w-100 mb-3",onClick:function(){return function(){var e;b.a.delete("https://localhost:3333/bank_accounts/"+o,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){g("Account deleted successfully"),h(2)})).catch((function(e){p(e.response.data.code),h(-1)}))}()},children:"Delete account"})})]})}),1===u&&Object(f.jsx)(J,{}),2===u&&Object(f.jsx)(Q,{account:A})]})}function te(){var e=Object(a.useState)(0),t=Object(r.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)("client_credentials"),i=Object(r.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(""),d=Object(r.a)(j,2),u=d[0],h=d[1],m=Object(a.useState)(""),O=Object(r.a)(m,2),x=O[0],p=O[1],v=Object(a.useState)("payme"),N=Object(r.a)(v,2),A=N[0],g=N[1],w=Object(a.useState)([]),y=Object(r.a)(w,2),k=y[0],_=y[1],C=function(){var e;n(2);var t=null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token;if("payme"===A)return b.a.post("https://localhost:3333/bank_accounts/",{bank:A},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){p("PayME Test Bank Account with \u20ac1000 added successfully"),n(3)})).catch((function(e){console.error(e),h("Check the console"),n(-1)})),!0;b.a.post("https://localhost:3333/oauth/",{bank:A,code:o},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.warn(e),"auth_url"in e.data?window.location.href=e.data.auth_url:"consent_url"in e.data?window.location.href=e.data.consent_url:"banks"in e.data?(_(e.data.banks),l(JSON.stringify({id:e.data.banks[0].id,name:e.data.banks[0].bankDisplayName})),g("neonomics"),n(1)):(p("Bank Accounts added successfully"),n(3))})).catch((function(e){console.error(e,e.response),h(e.response.data.message),n(-1)}))};return Object(f.jsxs)(z.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===c&&Object(f.jsx)(H,{error:u}),0===c&&Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" Add Account "}),Object(f.jsxs)("div",{className:"col-12 mobile_col",children:[Object(f.jsx)("label",{className:"form-label",children:"Select Bank"}),Object(f.jsxs)("select",{className:"form-control",value:A,onChange:function(e){return g(e.target.value)},children:[Object(f.jsx)("option",{value:"payme",selected:!0,children:" PayMe Test Bank "}),Object(f.jsx)("option",{value:"deutschebank",children:" Deutschebank "}),Object(f.jsx)("option",{value:"rabobank",children:" Rabobank "}),Object(f.jsx)("option",{value:"neonomics",children:" Neonomics "}),Object(f.jsx)("option",{value:"klarna",disabled:!0,children:" Klarna "})]})]}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:C,children:"Submit"})})]})}),1===c&&Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" Add Account "}),Object(f.jsxs)("div",{className:"col-12 mobile_col",children:[Object(f.jsx)("label",{className:"form-label",children:"Select Bank"}),Object(f.jsx)("select",{className:"form-control",value:o.name,onChange:function(e){return l(e.target.value)},children:k.map((function(e){return"AVAILABLE"===e.status&&"OP"!=e.bankDisplayName&&"Storebrand"!=e.bankDisplayName&&Object(f.jsxs)("option",{value:JSON.stringify({id:e.id,name:e.bankDisplayName}),children:[e.bankDisplayName," "]})}))})]}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:C,children:"Submit"})})]})}),2===c&&Object(f.jsx)(J,{}),3===c&&Object(f.jsx)(Q,{account:x})]})}function ce(){var e=Object(l.h)().bank,t=Object(a.useState)(1),c=Object(r.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(""),o=Object(r.a)(i,2),j=o[0],d=o[1],u=Object(a.useState)(""),h=Object(r.a)(u,2),m=h[0],O=h[1],x=new URLSearchParams(Object(l.g)().search);return Object(a.useEffect)((function(){return function(){var t,c=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token,a=x.get("code");x.get("code")?setTimeout((function(){b.a.post("https://localhost:3333/oauth-bank/",{code:a,bank:e},{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){console.log(e),O("Bank Accounts added successfully"),s(2)})).catch((function(e){console.error(e,e.response),d(e.response.data.message),s(-1)}))}),1e3):(d("No Code was received"),s(-1))}()}),[]),Object(f.jsxs)(z.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===n&&Object(f.jsx)(H,{error:j}),0===n&&Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" Add Account. "}),Object(f.jsx)("div",{className:"col-12 mobile_col"}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",children:"Submit"})})]})}),1===n&&Object(f.jsx)(J,{}),2===n&&Object(f.jsx)(Q,{account:m}),3===n&&Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"row mobile_row",children:[Object(f.jsx)(S,{back:!0,children:" Add Account. "}),Object(f.jsx)("div",{className:"col-12 mobile_col"}),Object(f.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(f.jsx)("button",{className:"btn btn-primary w-100 mb-3",children:"Submit"})})]})})]})}var ae=c(302),ne=c(301);function se(){return Object(f.jsx)(o.a,{children:Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{path:"*",children:Object(f.jsx)(ie,{})})})})}function ie(){var e=function(){return JSON.parse(localStorage.getItem("user"))},t=Object(a.useState)(e()),c=Object(r.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)([]),o=Object(r.a)(i,2),j=o[0],d=o[1],u=Object(a.useState)([]),h=Object(r.a)(u,2),m=h[0],O=h[1],x=Object(a.useState)([]),v=Object(r.a)(x,2),N=v[0],A=v[1],g=function(e){e.date=Date.now(),localStorage.setItem("user",JSON.stringify(e)),s(e),y(),_.replace("/")},w=function(){var t,c,a,n,i;(null===(t=e())||void 0===t?void 0:t.token)&&(b.a.get("https://localhost:3333/auth/",{headers:{Authorization:"Bearer ".concat(null===(c=e())||void 0===c?void 0:c.token)}}).then((function(t){var c,a={token:null===(c=e())||void 0===c?void 0:c.token,user:t.data,date:Date.now()};localStorage.setItem("user",JSON.stringify(a)),s(a.user)})).catch((function(e){console.error(e.response.data),localStorage.clear(),_.replace("/login")})),b.a.get("https://localhost:3333/fetch-banks/",{headers:{Authorization:"Bearer ".concat(null===(a=e())||void 0===a?void 0:a.token)}}).then((function(e){d(e.data)})).catch((function(e){console.warn(e.response)})),b.a.get("https://localhost:3333/fetch-transactions/",{headers:{Authorization:"Bearer ".concat(null===(n=e())||void 0===n?void 0:n.token)}}).then((function(e){O(e.data)})).catch((function(e){console.warn(e.response)})),b.a.get("https://localhost:3333/fetch-notifications/",{headers:{Authorization:"Bearer ".concat(null===(i=e())||void 0===i?void 0:i.token)}}).then((function(e){A(e.data)})).catch((function(e){console.warn(e.response)})))},y=function(){var t,c;(null===(t=e())||void 0===t?void 0:t.token)&&b.a.get("https://localhost:3333/refresh-tokens",{headers:{Authorization:"Bearer ".concat(null===(c=e())||void 0===c?void 0:c.token)}}).then((function(e){e.data;console.log("Refreshed tokens")}))},k=Object(l.g)(),_=Object(l.f)();return Object(a.useEffect)((function(){"/"===k.pathname&&w(),"/send-payment"!==k.pathname&&"/request-payment"!==k.pathname&&"/user/:userSlug"!==k.pathname&&"/request/:transactionID"!==k.pathname||y();var e=setInterval((function(){w()}),6e4),t=setInterval((function(){y()}),3e5);return function(){clearInterval(e),clearInterval(t)}}),[k.pathname]),n?Object(f.jsx)(ae.a,{user:n,children:Object(f.jsx)(ne.a,{classNames:"fade",timeout:300,children:Object(f.jsxs)(l.c,{location:k,children:[Object(f.jsx)(l.a,{path:"/notifications",children:Object(f.jsx)(R,{Notifications:N})}),Object(f.jsx)(l.a,{path:"/settings",children:Object(f.jsx)(F,{logout:function(){var t;b.a.get("https://localhost:3333/logout",{headers:{Authorization:"Bearer ".concat(null===(t=e())||void 0===t?void 0:t.token)}}).then((function(e){e.data;localStorage.clear(),s(void 0),_.replace("/")}))},user:n})}),Object(f.jsx)(l.a,{path:"/send-payment",children:Object(f.jsx)(Z,{transactionType:"Send"})}),Object(f.jsx)(l.a,{path:"/request-payment",children:Object(f.jsx)(Z,{transactionType:"Request"})}),Object(f.jsx)(l.a,{path:"/user/:userSlug",children:Object(f.jsx)(Z,{transactionType:"User"})}),Object(f.jsx)(l.a,{path:"/request/:transactionID",children:Object(f.jsx)(Z,{transactionType:"Payment"})}),Object(f.jsx)(l.a,{path:"/accounts",children:Object(f.jsx)($,{user:n,BankAccounts:j})}),Object(f.jsx)(l.a,{path:"/account/:id",children:Object(f.jsx)(ee,{})}),Object(f.jsx)(l.a,{path:"/add-account/:bank",children:Object(f.jsx)(ce,{})}),Object(f.jsx)(l.a,{path:"/add-account",children:Object(f.jsx)(te,{})}),Object(f.jsx)(l.a,{path:"/",children:Object(f.jsx)(q,{user:n,BankAccounts:j,Transactions:m,Notifications:N})})]})},k.key)}):Object(f.jsx)(ae.a,{children:Object(f.jsx)(ne.a,{classNames:"fade",timeout:300,children:Object(f.jsxs)(l.c,{location:k,children:[Object(f.jsx)(l.a,{path:"/login",children:Object(f.jsx)(E,{setToken:g})}),Object(f.jsx)(l.a,{path:"/register",children:Object(f.jsx)(P,{setToken:g})}),Object(f.jsx)(l.a,{path:"/",children:Object(f.jsx)(p,{})})]})},k.key)})}c(297),c(298);i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(se,{})}),document.getElementById("root"))}},[[299,1,2]]]);
//# sourceMappingURL=main.13e401ef.chunk.js.map