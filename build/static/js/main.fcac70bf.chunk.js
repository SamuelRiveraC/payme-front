(this["webpackJsonppayme-front"]=this["webpackJsonppayme-front"]||[]).push([[0],{163:function(e,t,c){},299:function(e,t,c){},301:function(e,t,c){},302:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(18),r=c.n(s),i=c(2),o=c(4),l=c(9),j=(c(80),c(5)),d=c.n(j),b=c(34),u=c(122),m=c.n(u),h=(c(163),c.p+"static/media/Money_transfer_1.e9c63204.png"),O=c.p+"static/media/Money_transfer_2.bdd99fea.png",x=c(0);var f=function(){return Object(x.jsx)("div",{className:"container container-transparent",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col onboarding",children:Object(x.jsxs)(m.a,Object(b.a)(Object(b.a)({},{dots:!0,arrows:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:"data:image/png;base64,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",alt:"Logo"}),Object(x.jsx)("br",{}),Object(x.jsx)("h3",{children:"Easy payments for individuals and business"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Send money to family and friends"}),Object(x.jsx)("br",{}),Object(x.jsx)("img",{src:h,alt:"Logo"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Pay products and service"}),Object(x.jsx)("br",{}),Object(x.jsx)("img",{src:O,alt:"Logo"})]})]}))}),Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(x.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/register",children:"Register"}),Object(x.jsx)("br",{}),Object(x.jsx)(o.b,{className:"btn btn-link-dark w-100",to:"/login",children:"Log In"})]})]})})},p=c(19),v=c.n(p),N=c(28),A=c(6),g=c(7);function w(){var e=Object(l.f)();return Object(x.jsx)("button",{className:"link",onClick:function(){e.goBack()},children:Object(x.jsx)(A.a,{size:"lg",icon:g.d})})}function y(){return Object(x.jsx)(o.b,{to:"/settings",children:Object(x.jsx)(A.a,{size:"lg",icon:g.b})})}function S(e){var t=e.notificationNumber;return Object(x.jsxs)(o.b,{to:"/notifications",style:{position:"relative"},children:[Object(x.jsx)(A.a,{size:"lg",icon:g.c,style:{height:60}}),t>0&&Object(x.jsxs)("div",{className:"notification__number",children:[" ",t," "]})]})}function _(e){var t=e.children,c=e.back,a=e.menu,n=e.notification,s=e.notificationNumber;return Object(x.jsx)("div",{className:"col-12 mobile_col header",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-6",children:[c&&Object(x.jsx)(w,{}),n&&Object(x.jsx)(S,{notificationNumber:s})]}),Object(x.jsx)("div",{className:"col-6 text-right",children:a&&Object(x.jsx)(y,{})}),t&&Object(x.jsxs)("div",{className:"col-12 mt-5 title",children:[" ",t," "]})]})})}var k=c(47),T=c(48),I=c(51),C=c(50),D=c(11),B=function(e){Object(I.a)(c,e);var t=Object(C.a)(c);function c(){return Object(k.a)(this,c),t.apply(this,arguments)}return Object(T.a)(c,[{key:"render",value:function(){return Object(x.jsx)(D.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:250,delay:250},leave:{animation:"fadeOut",duration:250},children:Object(x.jsx)("div",{className:"validation__error",children:this.props.active&&Object(x.jsxs)("div",{children:[" ",Object(x.jsx)(A.a,{size:"lg",icon:g.f})," ",this.props.children," "]})})})}}]),c}(n.a.Component);function E(e){var t=e.setToken,c=Object(a.useState)(),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(a.useState)({wrong:!1,emailOrPhone:!1,password:!1}),m=Object(i.a)(u,2),h=m[0],O=m[1],f=function(){setTimeout((function(){O({wrong:!1,emailOrPhone:!1,password:!1})}),6250)},p=function(){var e=Object(N.a)(v.a.mark((function e(c){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s&&j){e.next=5;break}return O({wrong:!1,emailOrPhone:!s,password:!j}),f(),e.abrupt("return",!1);case 5:d.a.post("https://localhost:3333/login",{emailOrPhone:s,password:j}).then((function(e){t(e.data)})).catch((function(e){O({wrong:!0,emailOrPhone:!1,password:!1}),f()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"row mobile_row",onSubmit:p,children:[Object(x.jsx)(_,{back:!0,children:" Log in PayMe "}),Object(x.jsxs)("div",{className:"col-12 mobile_col",children:[Object(x.jsx)(B,{active:h.wrong,children:" The Email, phone or password are incorrect  "})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"form-outline",children:[Object(x.jsx)("label",{className:"form-label",children:"Email or Phone"}),Object(x.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return r(e.target.value)}}),Object(x.jsx)(B,{active:h.emailOrPhone,children:" A phone number or email is required "})]}),Object(x.jsxs)("div",{className:"form-outline",children:[Object(x.jsx)("label",{className:"form-label",children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control",onChange:function(e){return b(e.target.value)}}),Object(x.jsx)(B,{active:h.password,children:" The password is required "})]}),Object(x.jsx)("div",{className:"form-outline",children:Object(x.jsx)("a",{className:"w-100 py-3",href:"#",children:"I Forgot my Password"})})]}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 mb-3",type:"submit",children:"Log In"})})]})})}function z(e){var t=e.setToken,c=Object(a.useState)(),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(),l=Object(i.a)(o,2),j=l[0],b=l[1],u=Object(a.useState)(),m=Object(i.a)(u,2),h=m[0],O=m[1],f=Object(a.useState)(),p=Object(i.a)(f,2),A=p[0],g=p[1],w=Object(a.useState)(),y=Object(i.a)(w,2),S=y[0],k=y[1],T=Object(a.useState)(),I=Object(i.a)(T,2),C=I[0],D=I[1],E=Object(a.useState)({}),z=Object(i.a)(E,2),P=z[0],U=z[1],V=function(){setTimeout((function(){U({duplicated:!1,password:!1,email:!1,phone:!1,first_name:!1,last_name:!1,tos:!1})}),6250)},J=function(){var e=Object(N.a)(v.a.mark((function e(c){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s&&j&&h&&A&&S&&C){e.next=5;break}return U({password:!s,email:!j,phone:!h,first_name:!A,last_name:!S,tos:!C}),V(),e.abrupt("return",!1);case 5:d.a.post("https://localhost:3333/users",{password:s,email:j,phone:h,first_name:A,last_name:S}).then((function(e){t(e.data)})).catch((function(e){U({duplicated:!0}),V()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"row mobile_row",onSubmit:J,children:[Object(x.jsx)(_,{back:!0,children:" Register in PayMe "}),Object(x.jsxs)("div",{className:"col-12 mobile_col",children:[Object(x.jsx)(B,{active:P.duplicated,children:" The Account already exists  "})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"form-outline ",children:[Object(x.jsx)("label",{className:"form-label",children:"First name"}),Object(x.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return g(e.target.value)}}),Object(x.jsx)(B,{active:P.first_name,children:" The first name is required  "})]}),Object(x.jsxs)("div",{className:"form-outline ",children:[Object(x.jsx)("label",{className:"form-label",children:"Last name"}),Object(x.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return k(e.target.value)}}),Object(x.jsx)(B,{active:P.last_name,children:" The last name is required  "})]}),Object(x.jsxs)("div",{className:"form-outline ",children:[Object(x.jsx)("label",{className:"form-label",children:"Email"}),Object(x.jsx)("input",{type:"email",className:"form-control",onChange:function(e){return b(e.target.value)}}),Object(x.jsx)(B,{active:P.email,children:" The email is required  "})]}),Object(x.jsxs)("div",{className:"form-outline ",children:[Object(x.jsx)("label",{className:"form-label",children:"Phone"}),Object(x.jsx)("input",{type:"phone",className:"form-control",onChange:function(e){return O(e.target.value)}}),Object(x.jsx)(B,{active:P.phone,children:" The phone number is required  "})]}),Object(x.jsxs)("div",{className:"form-outline ",children:[Object(x.jsx)("label",{className:"form-label",children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control",onChange:function(e){return r(e.target.value)}}),Object(x.jsx)(B,{active:P.password,children:" The password is required  "})]}),Object(x.jsxs)("div",{className:"form-check ",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(e){return D(e.target.checked)}}),Object(x.jsx)("label",{className:"form-check-label",children:"I Accept the Privacy policy and the Terms of Use"}),Object(x.jsx)("br",{}),Object(x.jsx)(B,{active:P.tos,children:" You are required to accept our ToS  "})]})]}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 ",type:"submit",children:"Register"})})]})})}var P=c(52);function U(e){var t=e.transaction,c=new Date(t.updated_at),a=new Intl.DateTimeFormat("en",{year:"numeric"}).format(c),n=new Intl.DateTimeFormat("en",{month:"short"}).format(c),s=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(c),r="".concat(s,"-").concat(n,"-").concat(a),i=JSON.parse(localStorage.getItem("user")).user;return"debit"===t.fetch_type||"credit"===t.fetch_type?Object(x.jsxs)("li",{className:"row",children:[Object(x.jsx)("div",{className:"col-2 text-left image",children:Object(x.jsx)("img",{src:"https://via.placeholder.com/160/29363D/EDF4FC?text="+t.party.slice(0,2),height:60,alt:"transaction"})}),Object(x.jsxs)("div",{className:"col-6 text-left information",children:[Object(x.jsxs)("b",{children:[" ",t.party," "]}),Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",r," "]})]}),Object(x.jsxs)("div",{className:"col-4 text-right amount",children:["debit"===t.fetch_type&&"-"," ",t.amount.toFixed(2),"\u20ac"]})]}):Object(x.jsxs)("li",{className:"row",children:[Object(x.jsxs)("div",{className:"col-2 text-left image",children:[i.id===t.sender.id&&Object(x.jsx)("img",{src:t.receiver.profile_picture,height:60,alt:"transaction"}),i.id===t.receiver.id&&Object(x.jsx)("img",{src:t.sender.profile_picture,height:60,alt:"transaction"})]}),Object(x.jsxs)("div",{className:"col-6 text-left information",children:[i.id===t.sender.id&&Object(x.jsxs)("b",{children:[" ",t.receiver.first_name," ",t.receiver.last_name," "]}),i.id===t.receiver.id&&Object(x.jsxs)("b",{children:[" ",t.sender.first_name," ",t.sender.last_name," "]}),Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",r," "]})]}),Object(x.jsxs)("div",{className:"col-4 text-right amount",children:[i.id===t.user_sender_id&&"-"," ",t.amount.toFixed(2),"\u20ac"]})]})}function V(e){var t,c,a,n=e.user,s=0,r=[];return n.bankAccounts&&(s=n.bankAccounts.length),c=null===(t=n.bankAccounts.find((function(e){return"true"===e.primary})))||void 0===t?void 0:t.balance,n.notifications&&(a=n.notifications.filter((function(e){return 0===e.status}))),n.transactionsSent&&n.transactionsReceived&&n.transactionsAPI&&(r=[].concat(Object(P.a)(n.transactionsSent),Object(P.a)(n.transactionsReceived),Object(P.a)(n.transactionsAPI))),r=r.sort((function(e,t){var c=new Date(e.updated_at);return new Date(t.updated_at)-c})).slice(0,8),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsxs)("div",{className:"row dashboard",children:[Object(x.jsx)(_,{notification:!0,notificationNumber:a.length,menu:!0}),Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",children:[(c||0==c)&&Object(x.jsxs)("h1",{children:[" ",Object(x.jsx)("small",{children:"Available Balance"})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("b",{children:[c,"\u20ac"]})," ",Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{})," "]}),!c&&0!=c&&0==s&&Object(x.jsx)("h1",{children:Object(x.jsx)(o.b,{to:"/add-account",children:"Upload a bank account to start"})}),!c&&0!=c&&s>0&&Object(x.jsx)("h3",{children:Object(x.jsx)(o.b,{to:"/add-account",children:"Change one account to primary, so it can be used for payments and requests"})})]})]}),Object(x.jsxs)("div",{className:"col-12 mobile_col text-center transactions",children:[Object(x.jsx)("p",{children:"Recent Activity"}),Object(x.jsx)("ul",{children:r.map((function(e,t){return Object(x.jsx)(U,{transaction:e},t)}))})]}),Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(x.jsx)(o.b,{className:"btn btn-primary w-100 mb-3",to:"/send-payment",children:"Send payment"}),Object(x.jsx)("br",{}),Object(x.jsx)(o.b,{className:"btn btn-outline-primary w-100 mb-3",to:"/request-payment",children:"Request payment"})]})]})})}var J=c(49),q=c.n(J);var L=function(e){var t=e.logout,c=e.user;return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)("img",{src:c.profile_picture,alt:"profile"})," ","".concat(c.first_name," ").concat(c.last_name)]})}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("ul",{className:"settings",children:[Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"/accounts",children:["My accounts ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"/add-account",children:["Add account ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"/settings",children:["Support ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"/settings",children:["Legal ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"/settings",children:["Invite Friends ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"link",onClick:t,style:{display:"flex",justifyContent:"space-between",width:"100%",height:"60px",margin:0,padding:0,lineHeight:"60px",color:"#29363D"},children:["Logout ",Object(x.jsx)(A.a,{size:"lg",icon:g.e})]})})]})}),Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",onClick:function(){navigator.clipboard.writeText("".concat("http://localhost:3000/","user/").concat(c.slug))},children:[Object(x.jsx)("a",{href:"".concat("http://localhost:3000/","user/").concat(c.slug),children:"".concat("http://localhost:3000/","user/").concat(c.slug)}),Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{}),Object(x.jsx)(q.a,{value:"".concat("http://localhost:3000/","user/").concat(c.slug)})]})]})})};function R(e){var t=e.notificationProp,c=Object(a.useState)(t),n=Object(i.a)(c,2),s=n[0],r=n[1],o=new Date(s.updated_at),j=new Intl.DateTimeFormat("en",{year:"numeric"}).format(o),u=new Intl.DateTimeFormat("en",{month:"short"}).format(o),m=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(o),h="".concat(m,"-").concat(u,"-").concat(j),O=Object(l.f)();return Object(x.jsxs)("button",{onClick:function(){if(0===s.type&&0===s.status)return O.push("/request/"+s.id),!0;if(0===s.status){var e,t=Object(b.a)({},s);t.status=0===t.status?1:0,d.a.put("https://localhost:3333/notifications/"+s.id,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}},{status:s.status}).then((function(e){e.data;r(t)})).catch((function(e){alert(e.response.data.code)}))}},className:0===s.status?"link row notification unread":"link row notification",children:[Object(x.jsxs)("div",{className:"col-10 text-left",children:[0===s.type&&Object(x.jsxs)("b",{children:[" ",s.transaction.receiver.first_name," ",s.transaction.receiver.last_name," has requested a payment for ",s.transaction.amount,"\u20ac "]}),1===s.type&&Object(x.jsxs)("b",{children:[" You have received ",s.transaction.amount,"\u20ac from ",s.transaction.sender.first_name," ",s.transaction.sender.last_name," "]}),Object(x.jsx)("br",{}),Object(x.jsxs)("small",{children:[" ",h," "]})]}),Object(x.jsx)("div",{className:"col-2 text-right",children:Object(x.jsx)(A.a,{size:"lg",icon:g.e})})]})}function F(e){var t=e.user.notifications.sort((function(e,t){return e.status-t.status})).sort((function(e,t){var c=new Date(e.updated_at);return new Date(t.updated_at)-c}));return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:"Notifications"}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsx)("ul",{className:"notification",children:t.map((function(e,t){return Object(x.jsx)(R,{notificationProp:e},t)}))})}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsx)("br",{})})]})})}c(299);function M(){return Object(x.jsx)("div",{className:"container container-transparent",children:Object(x.jsx)("div",{className:"row mobile_row",children:Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("div",{className:"ct-loader style1",children:Object(x.jsxs)("div",{className:"loading-spin",children:[Object(x.jsxs)("div",{className:"spinner",children:[Object(x.jsx)("div",{className:"right-side",children:Object(x.jsx)("div",{className:"bar"})}),Object(x.jsx)("div",{className:"left-side",children:Object(x.jsx)("div",{className:"bar"})})]}),Object(x.jsxs)("div",{className:"spinner color-2",children:[Object(x.jsx)("div",{className:"right-side",children:Object(x.jsx)("div",{className:"bar"})}),Object(x.jsx)("div",{className:"left-side",children:Object(x.jsx)("div",{className:"bar"})})]})]})})})})})}var G=function(e){Object(I.a)(c,e);var t=Object(C.a)(c);function c(e){var a;return Object(k.a)(this,c),(a=t.call(this,e)).getInfo=function(){var e=Object(N.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.get("https://localhost:3333/users/search/"+a.state.query).then((function(e){var t=e.data;a.setState({results:t})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.selectUser=function(e){a.setState({results:[]}),a.props.setUser(e)},a.handleInputChange=function(){a.setState({query:a.search.value},(function(){a.state.query&&a.state.query.length>3?a.state.query.length%2===0&&a.getInfo():a.state.query}))},a.state={query:a.props.value,results:[]},a}return Object(T.a)(c,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"AutosuggestInput__container",children:[Object(x.jsx)("input",{className:"form-control",placeholder:"Email or Phone number",ref:function(t){return e.search=t},onChange:function(){return e.handleInputChange()}}),Object(x.jsx)("ul",{className:"AutosuggestInput",children:Object(x.jsx)(D.VelocityTransitionGroup,{enter:{animation:"slideDown",duration:250,delay:300},leave:{animation:"slideUp",duration:250},children:this.state.results.map((function(t){return Object(x.jsxs)("li",{onClick:function(){return e.selectUser(t)},children:[Object(x.jsxs)("b",{children:[t.first_name," ",t.last_name]})," ",Object(x.jsx)("br",{})," ",t.email]},t.id)}))})})]})}}]),c}(n.a.Component);function K(e){var t=e.operation,c=e.setTransactionUser;return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-6",children:Object(x.jsx)(w,{})}),Object(x.jsxs)("div",{className:"col-12 mt-5 mobile_col title d-flex justify-content-between",children:[t," Payment"]})]})}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("div",{className:"form-outline mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:" Search User by Email or Phone number "}),Object(x.jsx)(G,{setUser:c})]})}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsx)("br",{})})]})})}function X(e){var t=e.userName,c=e.backStep,n=e.operation,s=e.setTransactionAmount,r=Object(a.useState)(""),l=Object(i.a)(r,2),j=l[0],d=l[1],b=function(e){if("X"===e||"x"===e||""===e||"Backspace"===e)d(j.slice(0,-1));else if("."===e)j.includes(".")||d(j+".");else if(" "!==e&&!isNaN(e)){var t=j.split(".");1!==t.length?t[1].length<=1&&d(j+e):d(j+e)}};return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-6",children:c?Object(x.jsx)("button",{className:"link",onClick:c,children:Object(x.jsx)(A.a,{size:"lg",icon:g.d})}):Object(x.jsx)(o.b,{to:"/",children:Object(x.jsx)(A.a,{size:"lg",icon:g.d})})}),Object(x.jsxs)("div",{className:"col-6 mt-5 mobile_col title d-flex justify-content-between",children:[Object(x.jsx)("span",{children:" Select Amount "}),Object(x.jsxs)("small",{children:[" ",t," "]})]})]})}),Object(x.jsx)("div",{className:"col-12 mobile_col calculator",children:Object(x.jsx)("div",{className:"form-outline mb-3",children:Object(x.jsx)("input",{type:"text",className:"form-control",value:j,onKeyUp:function(e){return b(e.key)}})})}),Object(x.jsxs)("div",{className:"col-12 mobile_col calculator",children:[Object(x.jsx)("div",{className:"button",onClick:function(){return b("1")},children:"1"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("2")},children:"2"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("3")},children:"3"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("4")},children:"4"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("5")},children:"5"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("6")},children:"6"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("7")},children:"7"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("8")},children:"8"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("9")},children:"9"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b(".")},children:"."}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("0")},children:"0"}),Object(x.jsx)("div",{className:"button",onClick:function(){return b("X")},children:Object(x.jsx)(A.a,{size:"lg",icon:g.a})})]}),Object(x.jsx)("div",{className:"col-12 mobile_col ",children:Object(x.jsxs)("button",{className:"btn btn-primary w-100 mb-3",onClick:function(){s(j)},children:[n," payment"]})})]})})}function W(e){var t=e.iban,c=e.amount,n=e.setOTP,s=e.backStep,r=Object(a.useState)(),l=Object(i.a)(r,2),j=l[0],b=l[1],u=Object(a.useState)(),m=Object(i.a)(u,2),h=m[0],O=m[1],f=function(){var e;d.a.get("https://localhost:3333/access_token/?bank=deutschebank",{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){var a=e.data;if(!a)return alert("No Key"),!1;d.a.post("https://simulator-api.db.com:443/gw/dbapi/others/onetimepasswords/v2/single",{method:"PHOTOTAN",requestType:"INSTANT_SEPA_CREDIT_TRANSFERS",requestData:{type:"challengeRequestDataInstantSepaCreditTransfers",targetIban:t,amountValue:c,amountCurrency:"EUR"}},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){b(e.data.id)})).catch((function(e){alert(e.response.message+" - Please add again your DeutscheBank account - It needs to Refresh Token")}))})).catch((function(e){alert(JSON.stringify(e.response.data))}))};return Object(a.useEffect)((function(){return f()}),[]),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-6",children:s?Object(x.jsx)("button",{className:"link",onClick:s,children:Object(x.jsx)(A.a,{size:"lg",icon:g.d})}):Object(x.jsx)(o.b,{to:"/",children:Object(x.jsx)(A.a,{size:"lg",icon:g.d})})}),Object(x.jsx)("div",{className:"col-6 mt-5 mobile_col title d-flex justify-content-between",children:Object(x.jsx)("span",{children:" Authorize the transaction"})})]})}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsxs)("div",{className:"form-outline mb-3",children:[Object(x.jsx)("label",{children:" Insert the authorization code at your Authy app"}),Object(x.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return O(e.target.value)}})]})}),Object(x.jsx)("div",{className:"col-12 mobile_col ",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:function(){var e;d.a.get("https://localhost:3333/access_token/?bank=deutschebank",{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){var t=e.data;if(!t)return alert("No Key"),!1;d.a.patch("https://simulator-api.db.com:443/gw/dbapi/others/onetimepasswords/v2/single/"+j,{response:h},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){n(e.data.otp)})).catch((function(e){b(null),f(),alert(e.response.data.message)}))})).catch((function(e){alert(e.response)}))},disabled:null==j,children:"Authorize transaction"})})]})})}function H(e){var t=e.error;e.tryAgain;return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row mobile_row",children:Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",children:[Object(x.jsx)("h1",{className:"validation__error mb-5",children:"E_ROW_NOT_FOUND"===t?"This item was not found":"E_ROW_SAME_USER"===t||"E_SAME_USER"===t?"You can't send a transaction or request to yourself":"E_TRANSACTION_PAID"===t?"This transaction has been already paid":"E_TRANSACTION_CANCELLED"===t?"This transaction was cancelled":"E_SENDER_NO_BANK_ACCOUNT"===t?"Sender has no a connected bank account":"E_RECEIVER_NO_BANK_ACCOUNT"===t?"Receiver has no a connected bank account":"E_INSUFFICIENT_FUNDS"===t?"Insufficient funds to make this transaction":"E_USER_WRONG_TRANSACTION_ID"===t?"You have no access to this transaction":t}),Object(x.jsx)(o.b,{className:"btn btn-outline-primary w-100 mt-5",to:"/",children:"Go to Main Menu"})]})})})}function Q(e){var t=e.operation,c=e.data,a=e.account;return Object(x.jsxs)("div",{className:"container container-transparent",children:[!a&&Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsxs)("h1",{children:[" ",c.amount," ",t," to ",c.userName]})}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("img",{src:c.profile_picture,alt:"profile_picture",style:{height:160,borderRadius:"100%"}})}),c.id&&Object(x.jsxs)("div",{className:"col-12 mobile_col text-center",style:{cursor:"pointer"},onClick:function(){navigator.clipboard.writeText("".concat("http://localhost:3000/","request/").concat(c.id))},children:[Object(x.jsxs)("p",{children:[" Share with ",c.userName," the link or QR code "]}),Object(x.jsxs)("p",{children:[" ",Object(x.jsxs)("b",{children:[" ","".concat("http://localhost:3000/","request/").concat(c.id)," "]})," "]}),Object(x.jsx)(q.a,{value:"".concat("http://localhost:3000/","request/").concat(c.id)})]}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/",children:"Main Menu"})})]}),a&&Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsxs)("h1",{children:[" ",a]})}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)(o.b,{className:"btn btn-light w-100 mb-3",to:"/",children:"Main Menu"})})]})]})}function Z(){var e,t=Object(a.useState)(1),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(0),o=Object(i.a)(r,2),l=o[0],j=o[1],b=Object(a.useState)(0),u=Object(i.a)(b,2),m=u[0],h=u[1],O=Object(a.useState)(""),f=Object(i.a)(O,2),p=f[0],v=f[1],N=Object(a.useState)(""),A=Object(i.a)(N,2),g=(A[0],A[1],null===(e=JSON.parse(localStorage.getItem("user")).user.bankAccounts.find((function(e){return"true"===e.primary})))||void 0===e?void 0:e.bank),w=Object(a.useState)({userName:"",amount:"",profile_picture:""}),y=Object(i.a)(w,2),S=y[0],_=y[1],k=function(){n>1&&s(n-1)},T=function(e){if(1===n)j(e),s(2);else if(2===n){if(e<=0)return!1;var t;if(e=parseFloat(e),h(e),"deutschebank"===g)s(3);else s(0),d.a.post("https://localhost:3333/transactions/",{user_receiver_id:l.id,amount:e,bank:g,otp:""},{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(e){_({userName:"".concat(e.data.receiver.first_name," ").concat(e.data.receiver.last_name),profile_picture:e.data.receiver.profile_picture,amount:"".concat(e.data.amount,"\u20ac")}),s(4)})).catch((function(e){s(-1),v(e.response.data.code)}))}else if(3===n){var c;s(0),d.a.post("https://localhost:3333/transactions/",{user_receiver_id:l.id,amount:m,bank:g,otp:e},{headers:{Authorization:"Bearer ".concat(null===(c=JSON.parse(localStorage.getItem("user")))||void 0===c?void 0:c.token)}}).then((function(e){200===e.status||201===e.status?(_({userName:"".concat(e.data.receiver.first_name," ").concat(e.data.receiver.last_name),profile_picture:e.data.receiver.profile_picture,amount:"".concat(e.data.amount,"\u20ac")}),s(4)):(s(-1),console.log("Error"),v("Error"))})).catch((function(e){s(-1),console.log(JSON.stringify(e.response.status)),v(JSON.stringify(e.response.status))}))}};return Object(x.jsx)("div",{children:Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:3===n||0===n||-1===n?"fadeIn":"slideDown",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===n&&Object(x.jsx)(H,{error:p}),0===n&&Object(x.jsx)(M,{}),1===n&&Object(x.jsx)(K,{operation:"Send",setTransactionUser:T}),2===n&&Object(x.jsx)(X,{operation:"Send",userName:"".concat(l.first_name," ").concat(l.last_name),backStep:k,setTransactionAmount:T}),3===n&&Object(x.jsx)(W,{iban:l.bankAccounts[0].iban,amount:m,setOTP:T,backStep:k}),4===n&&Object(x.jsx)(Q,{operation:"sent",data:S})]})})}function Y(){var e=Object(a.useState)(1),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(0),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(a.useState)(0),b=Object(i.a)(j,2),u=(b[0],b[1]),m=Object(a.useState)(0),h=Object(i.a)(m,2),O=h[0],f=h[1],p=Object(a.useState)({userName:"",amount:"",profile_picture:""}),v=Object(i.a)(p,2),N=v[0],A=v[1],g=function(e){if(1===c)l(e),n(2);else if(2===c){var t;if(e<=0)return!1;e=parseFloat(e),u(e),n(0),d.a.post("https://localhost:3333/transactions/",{user_sender_id:o.id,amount:e},{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(e){A({userName:"".concat(e.data.sender.first_name," ").concat(e.data.sender.last_name),profile_picture:e.data.sender.profile_picture,amount:"".concat(e.data.amount,"\u20ac"),id:e.data.id}),n(3)})).catch((function(e){n(-1),f(e.response.data.code)}))}};return Object(x.jsx)("div",{children:Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:3===c||0===c||-1===c?"fadeIn":"slideDown",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===c&&Object(x.jsx)(H,{error:O}),0===c&&Object(x.jsx)(M,{}),1===c&&Object(x.jsx)(K,{operation:"Request",setTransactionUser:g}),2===c&&Object(x.jsx)(X,{operation:"Request",userName:"".concat(o.first_name," ").concat(o.last_name),backStep:function(){c>1&&n(c-1)},setTransactionAmount:g}),3===c&&Object(x.jsx)(Q,{operation:"requested ",data:N})]})})}function $(e){var t=e.account;return Object(x.jsxs)(o.b,{className:"row",to:"/account/"+t.id,children:[Object(x.jsxs)("div",{className:"col-10 text-left information",children:[Object(x.jsxs)("b",{children:[" ",t.alias," "]})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("span",{children:[" ",t.iban,"  "]})]}),Object(x.jsx)("div",{className:"col-2 text-right amount",children:Object(x.jsx)(A.a,{size:"lg",icon:g.e})})]})}function ee(e){var t=e.user.bankAccounts;return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:" My Accounts "}),Object(x.jsx)("div",{className:"col-12 mobile_col",children:Object(x.jsx)("ul",{className:"account",children:t.map((function(e,t){return Object(x.jsx)($,{account:e},t)}))})}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)(o.b,{className:"btn btn-primary w-100 mb-3",to:"/add-account",children:"Add account"})})]})})}function te(){var e,t,c,n,s,r,o=Object(l.h)().id,j=(Object(l.f)(),Object(a.useState)(1)),b=Object(i.a)(j,2),u=b[0],m=b[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),f=O[0],p=O[1],v=Object(a.useState)(""),N=Object(i.a)(v,2),A=N[0],g=N[1],w=Object(a.useState)({}),y=Object(i.a)(w,2),S=y[0],k=y[1],T=Object(a.useState)(!1),I=Object(i.a)(T,2),C=I[0],B=I[1],E=function(e){var t;d.a.put("https://localhost:3333/bank_accounts/"+o,e,{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(t){e.primary?g("Account updated successfully"):g("Account consent renewed for the next 3 months successfully"),k(t.data),B("true"===t.data.primary),m(2)})).catch((function(e){p(e.response.data.code),m(-1)}))};return Object(a.useEffect)((function(){return function(){var e;d.a.get("https://localhost:3333/bank_accounts/"+o,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){m(0),k(e.data),B("true"===e.data.primary)})).catch((function(e){p(e.response.data.code),m(-1)}))}()}),[]),S.updated_at&&(e=new Date(S.updated_at),t=Intl.DateTimeFormat("en",{year:"numeric"}).format(e),c=Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e),s="".concat(n,"-").concat(c,"-").concat(t)),S.expires_at&&(e=new Date(S.expires_at),t=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),c=new Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e),r="".concat(n,"-").concat(c,"-").concat(t)),Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===u&&Object(x.jsx)(H,{error:f}),0===u&&Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:" Account Name "}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" Alias "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S.alias," "]})]})}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" IBAN "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S.iban,"  "]})]})}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" Current balance "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S.balance,"\u20ac  "]})]})}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" BIC / Swift "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S.bic," "]})]})}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" Last time renewed "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S&&s," "]})]})}),Object(x.jsx)("div",{className:"col-12 row mobile_col account",children:Object(x.jsxs)("div",{className:"col-12 text-left information",children:[Object(x.jsx)("b",{children:" Consent expires by "})," ",Object(x.jsx)("br",{})," ",Object(x.jsxs)("small",{children:[" ",S&&r," "]})]})}),Object(x.jsxs)("div",{className:"col-12 row mobile_col account",children:[Object(x.jsxs)("div",{className:"col-8 text-left information",children:[Object(x.jsx)("b",{children:" Set as primary Account "}),Object(x.jsx)("br",{})]}),Object(x.jsx)("div",{className:"col-4 text-left information",children:Object(x.jsxs)("label",{className:"switch",children:[Object(x.jsx)("input",{type:"checkbox",checked:C,onClick:function(){return B(!C),void E({primary:C?"false":"true"})}}),Object(x.jsx)("div",{className:"slide"})]})})]}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("button",{className:"btn btn-outline-primary w-100 mb-3",onClick:function(){return function(){var e;d.a.delete("https://localhost:3333/bank_accounts/"+o,{headers:{Authorization:"Bearer ".concat(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token)}}).then((function(e){g("Account deleted successfully"),m(2)})).catch((function(e){p(e.response.data.code),m(-1)}))}()},children:"Delete account"})})]})}),1===u&&Object(x.jsx)(M,{}),2===u&&Object(x.jsx)(Q,{account:A})]})}function ce(){var e=Object(a.useState)(0),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)("client_credentials"),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),u=b[0],m=b[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),f=O[0],p=O[1],v=Object(a.useState)("payme"),N=Object(i.a)(v,2),A=N[0],g=N[1],w=Object(a.useState)([]),y=Object(i.a)(w,2),S=y[0],k=y[1],T=function(){var e;n(2);var t=null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.token;if("payme"===A)return d.a.post("https://localhost:3333/bank_accounts/",{bank:A},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){p("PayME Test Bank Account with \u20ac1000 added successfully"),n(3)})).catch((function(e){console.error(e),m("Check the console"),n(-1)})),!0;d.a.post("https://localhost:3333/oauth/",{bank:A,code:o},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.warn(e),"auth_url"in e.data?window.location.href=e.data.auth_url:"consent_url"in e.data?window.location.href=e.data.consent_url:"banks"in e.data?(k(e.data.banks),l(JSON.stringify({id:e.data.banks[0].id,name:e.data.banks[0].bankDisplayName})),g("neonomics"),n(1)):(p("Bank Accounts added successfully"),n(3))})).catch((function(e){console.error(e,e.response),m(e.response.data.message),n(-1)}))};return Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===c&&Object(x.jsx)(H,{error:u}),0===c&&Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:" Add Account "}),Object(x.jsxs)("div",{className:"col-12 mobile_col",children:[Object(x.jsx)("label",{className:"form-label",children:"Select Bank"}),Object(x.jsxs)("select",{className:"form-control",value:A,onChange:function(e){return g(e.target.value)},children:[Object(x.jsx)("option",{value:"payme",selected:!0,children:" PayMe Test Bank "}),Object(x.jsx)("option",{value:"deutschebank",children:" Deutschebank "}),Object(x.jsx)("option",{value:"rabobank",children:" Rabobank "}),Object(x.jsx)("option",{value:"neonomics",children:" Neonomics "}),Object(x.jsx)("option",{value:"klarna",disabled:!0,children:" Klarna "})]})]}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:T,children:"Submit"})})]})}),1===c&&Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:" Add Account "}),Object(x.jsxs)("div",{className:"col-12 mobile_col",children:[Object(x.jsx)("label",{className:"form-label",children:"Select Bank"}),Object(x.jsx)("select",{className:"form-control",value:o.name,onChange:function(e){return l(e.target.value)},children:S.map((function(e){return"AVAILABLE"===e.status&&"OP"!=e.bankDisplayName&&"Storebrand"!=e.bankDisplayName&&"Hizonti Bank"!=e.bankDisplayName&&"Justo Bank"!=e.bankDisplayName&&Object(x.jsxs)("option",{value:JSON.stringify({id:e.id,name:e.bankDisplayName}),children:[e.bankDisplayName," "]})}))})]}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:T,children:"Submit"})})]})}),2===c&&Object(x.jsx)(M,{}),3===c&&Object(x.jsx)(Q,{account:f})]})}function ae(){var e=Object(l.h)().bank,t=Object(a.useState)(1),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),j=o[0],b=o[1],u=Object(a.useState)(""),m=Object(i.a)(u,2),h=m[0],O=m[1],f=new URLSearchParams(Object(l.g)().search);return Object(a.useEffect)((function(){return function(){var t,c=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token,a=f.get("code");f.get("code")?setTimeout((function(){d.a.post("https://localhost:3333/oauth-bank/",{code:a,bank:e},{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){console.log(e),O("Bank Accounts added successfully"),s(2)})).catch((function(e){console.error(e,e.response),b(e.response.data.message),s(-1)}))}),1e3):(b("No Code was received"),s(-1))}()}),[]),Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===n&&Object(x.jsx)(H,{error:j}),0===n&&Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"row mobile_row",children:[Object(x.jsx)(_,{back:!0,children:" Add Account. "}),Object(x.jsx)("div",{className:"col-12 mobile_col"}),Object(x.jsx)("div",{className:"col-12 mobile_col text-center",children:Object(x.jsx)("button",{className:"btn btn-primary w-100 mb-3",children:"Submit"})})]})}),1===n&&Object(x.jsx)(M,{}),2===n&&Object(x.jsx)(Q,{account:h})]})}function ne(){var e,t=Object(l.h)().id,c=Object(a.useState)(0),n=Object(i.a)(c,2),s=n[0],r=n[1],o=Object(a.useState)(0),j=Object(i.a)(o,2),b=j[0],u=j[1],m=Object(a.useState)(0),h=Object(i.a)(m,2),O=(h[0],h[1],Object(a.useState)(0)),f=Object(i.a)(O,2),p=f[0],v=f[1],N=Object(a.useState)({userName:"",amount:"",profile_picture:""}),A=Object(i.a)(N,2),g=A[0],w=A[1],y=(null===(e=JSON.parse(localStorage.getItem("user")).user.bankAccounts.find((function(e){return"true"===e.primary})))||void 0===e||e.bank,Object(a.useState)("")),S=Object(i.a)(y,2),_=(S[0],S[1],function(e){if(0===s){if(e<=0)return!1;r(2)}else if(1===s){var t;e=parseInt(e,10),r(0),d.a.post("https://localhost:3333/transaction/",{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}},{data:"placeholder"}).then((function(t){t.data;w({userName:"".concat(b.first_name," ").concat(b.last_name),profile_picture:b.profile_picture,amount:"".concat(e,"\u20ac")}),r(2)})).catch((function(e){r(-1),v(e.response.data.code)}))}});return Object(a.useEffect)((function(){return function(e){var t;d.a.get("https://localhost:3333/users/"+e,{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(e){var t=e.data;u(t),r(1)})).catch((function(e){r(-1),v(e.response.data.code)}))}(t)}),[t]),Object(x.jsx)("div",{children:Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:2===s||0===s||-1===s?"fadeIn":"slideDown",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===s&&Object(x.jsx)(H,{error:p,tryAgain:_}),0===s&&Object(x.jsx)(M,{}),1===s&&Object(x.jsx)(X,{operation:"Send",userName:"".concat(b.first_name," ").concat(b.last_name),backStep:null,setTransactionAmount:_}),2===s&&Object(x.jsx)(Q,{operation:"sent",data:g})]})})}function se(){var e=Object(l.h)().id,t=Object(a.useState)(0),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(0),o=Object(i.a)(r,2),j=(o[0],o[1],Object(a.useState)(0)),b=Object(i.a)(j,2),u=(b[0],b[1],Object(a.useState)(0)),m=Object(i.a)(u,2),h=m[0],O=m[1],f=Object(a.useState)({userName:"",amount:"",profile_picture:""}),p=Object(i.a)(f,2),v=p[0],N=p[1];return Object(a.useEffect)((function(){return function(){var t;d.a.put("https://localhost:3333/transactions/"+e,{},{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.token)}}).then((function(e){N({userName:"".concat(e.data.receiver.first_name," ").concat(e.data.receiver.last_name),profile_picture:e.data.receiver.profile_picture,amount:"".concat(e.data.amount,"\u20ac")}),s(1)})).catch((function(e){s(-1),O(e.response.data.code)}))}()}),[]),Object(x.jsx)("div",{children:Object(x.jsxs)(D.VelocityTransitionGroup,{enter:{animation:"fadeIn",duration:500,delay:600},leave:{animation:"slideUp",duration:500},children:[-1===n&&Object(x.jsx)(H,{error:h}),0===n&&Object(x.jsx)(M,{}),1===n&&Object(x.jsx)(Q,{operation:"paid",data:v})]})})}var re=c(305),ie=c(304);function oe(){return Object(x.jsx)(o.a,{children:Object(x.jsx)(l.c,{children:Object(x.jsx)(l.a,{path:"*",children:Object(x.jsx)(le,{})})})})}function le(){var e=function(){return JSON.parse(localStorage.getItem("user"))},t=Object(a.useState)(e()),c=Object(i.a)(t,2),n=c[0],s=c[1],r=function(e){e.date=Date.now(),localStorage.setItem("user",JSON.stringify(e)),s(e),o(),b.push("/")},o=function(){var t;d.a.get("https://localhost:3333/refresh",{headers:{Authorization:"Bearer ".concat(null===(t=e())||void 0===t?void 0:t.token)}}).then((function(e){e.data;console.log("Refreshed tokens")}))},j=Object(l.g)(),b=Object(l.f)();return Object(a.useEffect)((function(){"/"===j.pathname&&function(){var t,c;(null===(t=e())||void 0===t?void 0:t.token)&&d.a.get("https://localhost:3333/auth/",{headers:{Authorization:"Bearer ".concat(null===(c=e())||void 0===c?void 0:c.token)}}).then((function(t){var c,a,n={type:"bearer",token:null===(c=e())||void 0===c?void 0:c.token,user:t.data,date:Date.now(),keys:null===(a=e())||void 0===a?void 0:a.keys};console.log("handleReload"),localStorage.setItem("user",JSON.stringify(n)),s(n)})).catch((function(e){localStorage.clear(),b.push("/login")}))}();var t=setInterval((function(){o()}),48e4);return function(){return clearInterval(t)}}),[j.pathname]),n?Object(x.jsx)(re.a,{user:n.user,children:Object(x.jsx)(ie.a,{classNames:"fade",timeout:300,children:Object(x.jsxs)(l.c,{location:j,children:[Object(x.jsx)(l.a,{path:"/notifications",children:Object(x.jsx)(F,{user:n.user})}),Object(x.jsx)(l.a,{path:"/settings",children:Object(x.jsx)(L,{logout:function(){var t;d.a.get("https://localhost:3333/logout",{headers:{Authorization:"Bearer ".concat(null===(t=e())||void 0===t?void 0:t.token)}}).then((function(e){e.data;localStorage.clear(),s(void 0),b.replace("/")}))},user:n.user})}),Object(x.jsx)(l.a,{path:"/send-payment",children:Object(x.jsx)(Z,{})}),Object(x.jsx)(l.a,{path:"/request-payment",children:Object(x.jsx)(Y,{})}),Object(x.jsx)(l.a,{path:"/user/:id",children:Object(x.jsx)(ne,{})}),Object(x.jsx)(l.a,{path:"/request/:id",children:Object(x.jsx)(se,{})}),Object(x.jsx)(l.a,{path:"/accounts",children:Object(x.jsx)(ee,{user:n.user})}),Object(x.jsx)(l.a,{path:"/account/:id",children:Object(x.jsx)(te,{})}),Object(x.jsx)(l.a,{path:"/add-account/:bank",children:Object(x.jsx)(ae,{})}),Object(x.jsx)(l.a,{path:"/add-account",children:Object(x.jsx)(ce,{})}),Object(x.jsx)(l.a,{path:"/",children:Object(x.jsx)(V,{user:n.user})})]})},j.key)}):Object(x.jsx)(re.a,{children:Object(x.jsx)(ie.a,{classNames:"fade",timeout:300,children:Object(x.jsxs)(l.c,{location:j,children:[Object(x.jsx)(l.a,{path:"/login",children:Object(x.jsx)(E,{setToken:r})}),Object(x.jsx)(l.a,{path:"/register",children:Object(x.jsx)(z,{setToken:r})}),Object(x.jsx)(l.a,{path:"/",children:Object(x.jsx)(f,{})})]})},j.key)})}c(300),c(301);r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(oe,{})}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.fcac70bf.chunk.js.map